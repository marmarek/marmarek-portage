diff -u -urN heimdal-0.7-old/cf/db.m4 heimdal-0.7/cf/db.m4
--- heimdal-0.7-old/cf/db.m4	2005-06-16 18:28:31.000000000 +0200
+++ heimdal-0.7/cf/db.m4	2005-09-14 13:03:44.000000000 +0200
@@ -18,24 +18,13 @@
 
 if test "$enable_berkeley_db" != no; then
 
-  AC_CHECK_HEADERS([				\
-	db4/db.h				\
-	db3/db.h				\
-	db.h					\
-	db_185.h				\
-  ])
+  AC_CHECK_HEADERS([db.h])
 
 dnl db_create is used by db3 and db4
 
-  AC_FIND_FUNC_NO_LIBS(db_create, db4 db3 db, [
+  AC_FIND_FUNC_NO_LIBS(db_create, db, [
   #include <stdio.h>
-  #ifdef HAVE_DB4_DB_H
-  #include <db4/db.h>
-  #elif defined(HAVE_DB3_DB_H)
-  #include <db3/db.h>
-  #else
   #include <db.h>
-  #endif
   ],[NULL, NULL, 0])
 
   if test "$ac_cv_func_db_create" = "yes"; then
@@ -50,17 +39,9 @@
 
 dnl dbopen is used by db1/db2
 
-    AC_FIND_FUNC_NO_LIBS(dbopen, db2 db, [
+    AC_FIND_FUNC_NO_LIBS(dbopen, db, [
     #include <stdio.h>
-    #if defined(HAVE_DB2_DB_H)
-    #include <db2/db.h>
-    #elif defined(HAVE_DB_185_H)
-    #include <db_185.h>
-    #elif defined(HAVE_DB_H)
     #include <db.h>
-    #else
-    #error no db.h
-    #endif
     ],[NULL, 0, 0, 0, NULL])
 
     if test "$ac_cv_func_dbopen" = "yes"; then
diff -u -urN heimdal-0.7-old/lib/hdb/db.c heimdal-0.7/lib/hdb/db.c
--- heimdal-0.7-old/lib/hdb/db.c	2005-06-16 18:28:03.000000000 +0200
+++ heimdal-0.7/lib/hdb/db.c	2005-09-14 13:05:43.000000000 +0200
@@ -37,11 +37,7 @@
 
 #if HAVE_DB1
 
-#if defined(HAVE_DB_185_H)
-#include <db_185.h>
-#elif defined(HAVE_DB_H)
 #include <db.h>
-#endif
 
 static krb5_error_code
 DB_close(krb5_context context, HDB *db)
diff -u -urN heimdal-0.7-old/lib/hdb/db3.c heimdal-0.7/lib/hdb/db3.c
--- heimdal-0.7-old/lib/hdb/db3.c	2005-06-16 18:28:03.000000000 +0200
+++ heimdal-0.7/lib/hdb/db3.c	2005-09-14 13:05:25.000000000 +0200
@@ -37,13 +37,7 @@
 
 #if HAVE_DB3
 
-#ifdef HAVE_DB4_DB_H
-#include <db4/db.h>
-#elif defined(HAVE_DB3_DB_H)
-#include <db3/db.h>
-#else
 #include <db.h>
-#endif
 
 static krb5_error_code
 DB_close(krb5_context context, HDB *db)
diff -u -urN heimdal-0.7-old/lib/roken/getcap.c heimdal-0.7/lib/roken/getcap.c
--- heimdal-0.7-old/lib/roken/getcap.c	2005-06-16 18:28:27.000000000 +0200
+++ heimdal-0.7/lib/roken/getcap.c	2005-09-14 13:08:54.000000000 +0200
@@ -38,11 +38,13 @@
 #include "roken.h"
 RCSID("$Id: getcap.c,v 1.10 2005/04/12 11:28:44 lha Exp $");
 
+#if defined(HAVE_DBOPEN) && defined(HAVE_DB_H)
+#define USE_DB
+#endif
+
 #include <sys/types.h>
 #include <ctype.h>
-#if defined(HAVE_DB_185_H)
-#include <db_185.h>
-#elif defined(HAVE_DB_H)
+#ifdef USE_DB
 #include <db.h>
 #endif
 #include <errno.h>	
